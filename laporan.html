<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Laporan | JKT48 Protection</title>

<style>
:root{
  --red:#c62828;
  --dark:#7f0000;
}

*{margin:0;padding:0;box-sizing:border-box}

body{
  font-family:Arial, Helvetica, sans-serif;
  background:#f7f7f7;
}

/* ================= HEADER ================= */
header{
  position:sticky;
  top:0;
  background:#fff;
  z-index:1000;
  border-bottom:1px solid #eee;
}

.header-inner{
  max-width:1200px;
  margin:auto;
  padding:14px 20px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  position:relative;
}

.brand{
  display:flex;
  align-items:center;
  gap:14px;
  text-decoration:none;
  color:inherit;
}

.header-logo{
  width:64px;
  height:64px;
  border-radius:50%;
  overflow:hidden;
}

.header-logo img{
  width:100%;
  height:100%;
  object-fit:cover;
}

.brand-text .title{font-weight:900;font-size:20px}
.brand-text .subtitle{font-size:12px;color:#777}

.header-title{
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  font-weight:900;
  color:var(--red);
  display:none;
}

nav ul{
  list-style:none;
  display:flex;
  gap:28px;
}

nav a{
  text-decoration:none;
  color:#333;
  font-weight:600;
}

.hamburger{
  display:none;
  width:46px;
  height:46px;
  background:var(--red);
  border-radius:10px;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  gap:6px;
  cursor:pointer;
}

.hamburger span{
  width:22px;
  height:3px;
  background:#fff;
  border-radius:2px;
}

.hamburger span{
  width:22px;
  height:3px;
  background:#fff;
  border-radius:2px;
  transition:.3s ease;
}

/* ===== HAMBURGER ‚Üí X ===== */
.hamburger.active span:nth-child(1){
  transform:translateY(9px) rotate(45deg);
}
.hamburger.active span:nth-child(2){
  opacity:0;
}
.hamburger.active span:nth-child(3){
  transform:translateY(-9px) rotate(-45deg);
}

/* ================= CONTENT ================= */
.report-wrapper{
  max-width:900px;
  margin:60px auto;
  padding:0 20px;
}

.report-box{
  background:#fff;
  border-radius:16px;
  padding:30px;
  margin-bottom:30px;
  box-shadow:0 8px 30px rgba(0,0,0,.08);
}

.report-box h2{
  color:var(--red);
  margin-bottom:10px;
}

.report-box p{
  color:#555;
  margin-bottom:20px;
  line-height:1.6;
}

/* EMAIL */
.email-item{
  margin-bottom:14px;
}

.email-item a{
  font-weight:700;
  color:var(--red);
  text-decoration:none;
}

/* FORM */
form label{
  font-weight:700;
  display:block;
  margin-bottom:6px;
}

form input, form select, form textarea{
  width:100%;
  padding:12px 14px;
  border-radius:10px;
  border:1px solid #ccc;
  margin-bottom:16px;
  font-size:14px;
}

form textarea{resize:vertical}

form button{
  background:var(--red);
  color:#fff;
  border:none;
  padding:14px 26px;
  border-radius:10px;
  font-weight:700;
  cursor:pointer;
}

form button:hover{background:#e53935}

.success-msg{
  display:none;
  margin-top:20px;
  padding:14px;
  background:#e8f5e9;
  border-left:6px solid #2e7d32;
  color:#2e7d32;
  border-radius:10px;
  font-weight:700;
}

.error-msg{
  display:none;
  margin-top:14px;
  padding:14px;
  background:#fdecea;
  border-left:6px solid #c62828;
  color:#c62828;
  border-radius:10px;
}

/* FOOTER */
footer{
  background:var(--dark);
  color:#fff;
  text-align:center;
  padding:24px;
  font-size:14px;
  margin-top:60px;
}

/* MOBILE */
@media(max-width:768px){
  .brand{display:none}
  .header-title{display:block}
  .hamburger{display:flex}

  nav ul{
    position:fixed;
    top:0;
    right:0;
    width:260px;
    height:100vh;
    background:var(--red);
    padding:100px 30px;
    flex-direction:column;
    transform:translateX(100%);
    transition:.3s;
  }

  nav ul.open{transform:translateX(0)}
  nav a{color:#fff;font-size:18px}
}

.form-warning {
  background: #fff3cd;
  border: 1px solid #ffeeba;
  color: #856404;
  padding: 12px 14px;
  border-radius: 8px;
  font-size: 14px;
  margin-bottom: 16px;
}
</style>
</head>

<body>

<header>
  <div class="header-inner">
    <a href="index.html" class="brand">
      <div class="header-logo">
        <img src="logoindex.jpg">
      </div>
      <div class="brand-text">
        <div class="title">JKT48 Protection</div>
        <div class="subtitle">OFFICIAL WEBSITE</div>
      </div>
    </a>

    <div class="header-title">LAPORAN</div>

    <nav>
      <div class="hamburger" id="hamburger">
        <span></span><span></span><span></span>
      </div>
      <ul id="menu">
        <li><a href="index.html">Home</a></li>
        <li><a href="info.html">Info</a></li>
        <li><a href="laporan.html">Laporan</a></li>
      </ul>
    </nav>
  </div>
</header>

<main class="report-wrapper">

  <!-- EMAIL -->
  <div class="report-box">
    <h2>Laporan via Email</h2>
    <p>Kamu bisa melaporkan akun bermasalah langsung melalui email resmi berikut:</p>

    <div class="email-item">
      üìß <a href="mailto:support@jkt48.com">support@jkt48.com</a><br>
      <small>Email resmi JKT48</small>
    </div>

    <div class="email-item">
      üìß <a href="mailto:jkt48protection@gmail.com">jkt48protection@gmail.com</a><br>
      <small>Email JKT48 Protection</small>
    </div>
  </div>

<!-- FORM -->
<div class="report-box">
  <h2>Form Laporan Anonim</h2>
  <p>
    Form ini bersifat <strong>anonim</strong>. Data akan langsung masuk ke sistem arsip kami.
  </p>

<div class="form-warning">
  ‚ö†Ô∏è Form ini hanya dapat diisi <b>maksimal 2 kali dalam 15 menit</b>.
  <br>
  Harap masukkan data dengan <b>benar, sopan, dan sesuai fakta</b>.
</div>

  <form id="reportForm">

      <label>Nama Akun Bermasalah</label>
      <input type="text" name="akun" required>

      <label>Platform Sosial Media</label>
     <select name="platform" required>
  <option value="">Pilih Platform</option>
  <option value="X / Twitter">X (Twitter)</option>
  <option value="Instagram">Instagram</option>
  <option value="Telegram">Telegram</option>
  <option value="LINE">LINE</option>
  <option value="Facebook">Facebook</option>
  <option value="Threads">Threads</option>
  <option value="YouTube">YouTube</option>
  <option value="TikTok">TikTok</option>
  <option value="Discord">Discord</option>
  <option value="Pinterest">Pinterest</option>
  <option value="Wattpad">Wattpad</option>
  <option value="Website / Blog">Website / Blog</option>
</select>

      <label>Kategori Laporan</label>
<select name="kategori" required>
  <option value="">Pilih Kategori</option>

  <option value="Pelecehan">Pelecehan</option>
  <option value="Penipuan">Penipuan</option>
  <option value="Pencemaran Nama Baik">Pencemaran Nama Baik</option>
  <option value="Ancaman">Ancaman</option>

  <option value="AU / Alternate Universe">AU / Alternate Universe</option>
  <option value="Konten Tidak Pantas">Konten Tidak Pantas</option>
  <option value="Penyebaran Hoaks">Penyebaran Hoaks</option>
  <option value="Provokasi / Ujaran Kebencian">Provokasi / Ujaran Kebencian</option>
  <option value="Impersonasi">Impersonasi (Akun Palsu)</option>

  <option value="Lainnya">Lainnya</option>
</select>

<label>Alasan / Kronologi</label>
<textarea
  name="alasan"
  rows="5"
  placeholder="Jelaskan kronologi kejadian secara singkat, jelas, dan sesuai fakta. Sertakan waktu, konteks, dan dampak jika ada."
  required
></textarea>

      <label>
        Bukti  
        <small>(link Google Drive, link sosial media, atau link doksli)</small>
      </label>
      <input type="url" name="bukti" placeholder="https://" required>

      <button type="submit">Kirim Laporan</button>
    </form>

    <div class="error-msg" id="errorMsg">
      ‚ùå Bukti wajib berupa link (URL), bukan kalimat.
    </div>

    <div class="success-msg" id="successMsg">
      ‚úî Pesan telah diterima. Terima kasih atas laporan Anda.
    </div>
  </div>

</main>

<footer>
  ¬© 2026 JKT48 Protection. All Rights Reserved.
</footer>

<script>
/* ================== MENU ================== */
const hamburger = document.getElementById("hamburger");
const menu = document.getElementById("menu");
hamburger.onclick = () => {
  hamburger.classList.toggle("active");
  menu.classList.toggle("open");
};

/* ================== NORMALISASI + FUZZY ================== */
function normalizeText(text) {
  return text
    .toLowerCase()
    .replace(/[4@]/g, "a")
    .replace(/[1!]/g, "i")
    .replace(/[0]/g, "o")
    .replace(/[3]/g, "e")
    .replace(/[$5]/g, "s")
    .replace(/[^a-z0-9\s]/g, " ")
    .replace(/\s+/g, " ")
    .trim();
}

/* ================== KATA TERLARANG (1 KATA = GAGAL) ================== */
const forbiddenWords = [
  // kasar & makian
  "goblok","tolol","bodoh","jot","bacot",
  "anjing","babi","bangsat","bajingan","kampret",

  // seksual
  "kontol","memek","ngentot","perek","sange",

  // kata kasar ringan / provokatif
  "bawel","rewel","cerewet","nyinyir","rese","berisik",
  "lebay","ribet","drama","pansos","caper",

  // sapaan kasar
  "lu","lo","gw","gua",

  // lainnya
  "gabut"
];

/* ================== POLA KALIMAT ================== */
const forbiddenPatterns = [
  /sok\s*peduli/,
  /peduli\s*amat/,
  /sok\s*pahlawan/,
  /pahlawan\s*kesiangan/,
  /cari\s*perhatian/,
  /kurang\s*kerjaan/,
  /ngapain(\s*aja|\s*sih)?/,
  /ga(k)?\s*penting/,
  /urus\s*hidup\s*lu/,
  /siapa\s*(lu|elu)/,
  /ngapain\s*dilaporin/,
  /ga\s*usah\s*dilaporin/
];

/* ================== RATE LIMIT (2 LAPORAN / 15 MENIT) ================== */
function isRateLimited() {
  const now = Date.now();
  const limitWindow = 15 * 60 * 1000; // 15 menit

  let data = JSON.parse(localStorage.getItem("report_limit")) || {
    count: 0,
    startTime: now
  };

  // reset jika lewat 15 menit
  if (now - data.startTime > limitWindow) {
    data = {
      count: 0,
      startTime: now
    };
  }

  if (data.count >= 2) {
    return true;
  }

  data.count += 1;
  localStorage.setItem("report_limit", JSON.stringify(data));
  return false;
}

/* ================== FORM ================== */
const form = document.getElementById("reportForm");
const successMsg = document.getElementById("successMsg");
const errorMsg = document.getElementById("errorMsg");

form.addEventListener("submit", function(e){
  e.preventDefault();

  /* üö´ RATE LIMIT */
  if (isRateLimited()) {
    errorMsg.innerText =
      "Kamu hanya bisa mengirim 2 laporan setiap 15 menit.";
    errorMsg.style.display = "block";
    successMsg.style.display = "none";
    return;
  }

  /* üî• GABUNG SEMUA INPUT */
  let combinedText = "";
  form.querySelectorAll("input, textarea, select").forEach(el => {
    if (el.value) combinedText += " " + el.value;
  });

  const text = normalizeText(combinedText);

  /* üö´ CEK KATA TERLARANG */
  for (const word of forbiddenWords) {
    const regex = new RegExp(`\\b${word}\\b`, "i");
    if (regex.test(text)) {
      errorMsg.innerText =
        "Laporan ditolak karena mengandung kata kasar atau ujaran kebencian.";
      errorMsg.style.display = "block";
      successMsg.style.display = "none";
      return;
    }
  }

  /* üö´ CEK POLA KALIMAT */
  for (const pattern of forbiddenPatterns) {
    if (pattern.test(text)) {
      errorMsg.innerText =
        "Laporan ditolak karena mengandung kalimat merendahkan atau provokatif.";
      errorMsg.style.display = "block";
      successMsg.style.display = "none";
      return;
    }
  }

  /* üîó VALIDASI LINK */
  const bukti = form.bukti.value.trim();
  if (!/^https?:\/\/\S+$/i.test(bukti)) {
    errorMsg.innerText =
      "Kolom bukti WAJIB berupa link (Google Drive / Sosial Media).";
    errorMsg.style.display = "block";
    successMsg.style.display = "none";
    return;
  }

  errorMsg.style.display = "none";

  fetch("https://script.google.com/macros/s/AKfycbzrppswpw0IkqTHYRaRgQRwXmoYU8emCL6U7GBGplH8Tto6yHnRVO8wgbUqcrjup1Eo/exec", {
    method: "POST",
    body: new FormData(form)
  })
  .then(() => {
    form.reset();
    successMsg.style.display = "block";
  })
  .catch(() => alert("Gagal mengirim laporan"));
});
</script>

</body>
</html>
